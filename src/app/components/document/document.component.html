<div
  class="w-full h-full flex flex-col items-center justify-center bg-[var(--mat-sys-surface-container)] print:contents!"
>
  <!-- DIN A4 Sheet -->
  @let form = selectedForm();
  <div
    class="flex flex-col w-[210mm] h-[297mm] bg-[var(--mat-sys-surface)] print:bg-transparent shadow-[var(--mat-sys-level1)] print:shadow-none text-[12pt] leading-none print:break-after-page print:break-inside-avoid relative"
  >
    <!-- Faltmarke 1 -->
    <div
      class="absolute top-[105mm] left-[5mm] w-[5mm] h-[0.25mm] bg-[var(--mat-sys-on-surface)]"
    ></div>
    <!-- Faltmarke 2 -->
    <div
      class="absolute bottom-[87mm] left-[5mm] w-[5mm] h-[0.25mm] bg-[var(--mat-sys-on-surface)]"
    ></div>
    <!-- Lochmarke -->
    <div
      class="absolute top-[148.5mm] left-[5mm] w-[10mm] h-[0.25mm] bg-[var(--mat-sys-on-surface)]"
    ></div>

    <div
      class="flex flex-row ml-[20mm] gap-[20mm]"
      [ngClass]="{
        'mt-[45mm]': form === 'B',
        'mt-[27mm]': form === 'A'
      }"
    >
      <!-- Anschriftfeld -->
      @let addr = address();

      <div
        class="flex flex-col w-[85mm] h-[45mm] pl-[5mm] bg-[var(--mat-sys-surface-container-low)] print:bg-transparent rounded-[3mm] select-none"
      >
        <!-- Rücksendeangabe -->
        <div class="h-[5mm] text-[8pt] leading-normal">
          @if(addr.senderDetails) {} @else {
          <!-- Placeholder -->
          <span class="opacity-50 print:hidden"
            >Klaus Fischer • Am Bahnhof 5 • 20095 Hamburg</span
          >
          }
        </div>
        <!-- Zusatz- und Vermerkzone -->
        <div class="h-[12.7mm] flex flex-col-reverse">
          @if(addr.endorsement) { @for(line of addr.endorsement.split('\n');
          track line) {
          <span>{{ line }}</span>
          } } @else {
          <!-- Placeholder -->
          <span class="opacity-50 print:hidden">Einschreiben</span>
          }
        </div>
        <!-- Anschriftzone -->
        <div class="h-[27.3mm] flex flex-col">
          @if (addr.recipientDetails) { @for(line of
          addr.recipientDetails.split('\n'); track line) {
          <span>{{ line }}</span>
          } } @else {
          <!-- Placeholder -->
          <span class="opacity-50 print:hidden">Musterfirma GmbH</span>
          <span class="opacity-50 print:hidden">Frau Richterin</span>
          <span class="opacity-50 print:hidden">Dr. Sabine Meier</span>
          <span class="opacity-50 print:hidden">Hauptstraße 123</span>
          <span class="opacity-50 print:hidden">10115 Berlin</span>
          <!-- <span class="opacity-50 print:hidden">(DEUTSCHLAND)</span> -->
          }
        </div>
      </div>
      <!-- Informationsblock -->
      @let info = infoBlock(); @if (info !== undefined) {
      <div
        class="w-[75mm] min-h-[40mm] mt-[5mm] bg-[var(--mat-sys-surface-container-low)] print:bg-transparent flex flex-col-reverse"
      >
        @for(line of info.split('\n'); track line) {
        <span>{{ line }}</span>
        }
      </div>
      }
    </div>

    <!-- Bezugszeichenzeile -->
    @let ref = refLine(); @if (ref !== undefined) {
    <div
      class="flex flex-row ml-[25mm] mr-[10mm] mt-[24pt] w-auto bg-[var(--mat-sys-surface-container-low)] print:bg-transparent"
      [ngClass]="{
        'top-[50mm]': form === 'B',
        'top-[32mm]': form === 'A'
      }"
    >
      <!-- Ihr Zeichen / Ihre Nachricht vom -->
      <div class="flex flex-col w-[50mm]"></div>
      <!-- Unser Zeichen / Unsere Nachricht vom -->
      <div class="flex flex-col w-[50mm]"></div>
      <!-- Telefon, Name -->
      <div class="flex flex-col w-[50mm]"></div>
      <!-- Datum -->
      <div class="flöex flex-col flex-1">
        <label for="date" class="text-[8pt] block">Datum</label>
        <div id="date" name="date">24.04.2025</div>
      </div>
    </div>
    }

    <!-- Textfeld -->
    <div
      class="ml-[25mm] mr-[20mm] mt-[24pt] mb-[12pt] w-auto flex-1 bg-[var(--mat-sys-surface-container-low)] print:bg-transparent"
    >
      <textarea
        name="text"
        id="text"
        class="w-full h-full resize-none overflow-hidden"
        [value]="text()"
        (input)="onTextInput($event)"
      ></textarea>
    </div>
    <!-- Seitenzahl -->
    <div class="ml-[25mm] mr-[20mm] w-auto flex flex-row-reverse">
      Seite 1 von 1
    </div>
    <!-- Fußzeile -->
    @if(false) {
    <div
      class="mt-[12pt] mb-[24pt] ml-[25mm] mr-[20mm] w-auto h-[48pt] bg-[var(--mat-sys-surface-container-low)] print:bg-transparent"
    ></div>
    } @else {
    <div class="mt-[24pt]"></div>
    }
  </div>
</div>
